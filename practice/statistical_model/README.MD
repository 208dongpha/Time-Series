# Ph√¢n T√≠ch v√† D·ª± B√°o Doanh S·ªë B√°n L·∫ª b·∫±ng ARIMA v√† SARIMA

## T·ªïng Quan D·ª± √Ån

D·ª± √°n n√†y th·ª±c hi·ªán ph√¢n t√≠ch v√† d·ª± b√°o chu·ªói th·ªùi gian doanh s·ªë b√°n l·∫ª h√†ng th√°ng s·ª≠ d·ª•ng c√°c m√¥ h√¨nh th·ªëng k√™ ARIMA (AutoRegressive Integrated Moving Average) v√† SARIMA (Seasonal ARIMA). M·ª•c ti√™u l√† so s√°nh hi·ªáu qu·∫£ gi·ªØa hai m√¥ h√¨nh trong vi·ªác d·ª± b√°o d·ªØ li·ªáu c√≥ xu h∆∞·ªõng tƒÉng tr∆∞·ªüng m·∫°nh v√† t√≠nh m√πa v·ª• r√µ r·ªát.

### K·∫øt Qu·∫£ T√≥m T·∫Øt

D·ª±a tr√™n d·ªØ li·ªáu ki·ªÉm th·ª≠, m√¥ h√¨nh **SARIMA** cho th·∫•y s·ª± v∆∞·ª£t tr·ªôi ho√†n to√†n:

- **Ch·ªâ s·ªë AIC**: Gi·∫£m t·ª´ **597.03** (ARIMA) xu·ªëng **279.03** (SARIMA) - gi·∫£m 53%
- **Sai s·ªë MAPE**: Gi·∫£m t·ª´ **21.51%** xu·ªëng c√≤n **11.55%** - gi·∫£m g·∫ßn 50%
- **RMSE**: Gi·∫£m t·ª´ **4.30** xu·ªëng **2.47** - gi·∫£m 43%
- **Kh·∫£ nƒÉng d·ª± b√°o**: SARIMA t√°i hi·ªán ƒë∆∞·ª£c c√°c bi·∫øn ƒë·ªông h√¨nh rƒÉng c∆∞a th·ª±c t·∫ø, trong khi ARIMA ch·ªâ d·ª± b√°o ƒë∆∞·ª£c xu h∆∞·ªõng ph·∫≥ng

---

## C√†i ƒê·∫∑t v√† Y√™u C·∫ßu

### Y√™u C·∫ßu H·ªá Th·ªëng

- Python 3.7+
- C√°c th∆∞ vi·ªán Python (xem `requirements.txt`)

### C√†i ƒê·∫∑t

```bash
pip install -r requirements.txt
```

### C√°c Th∆∞ Vi·ªán Ch√≠nh

- **statsmodels**: X√¢y d·ª±ng m√¥ h√¨nh ARIMA/SARIMA, ki·ªÉm ƒë·ªãnh ADF, v·∫Ω ACF/PACF
- **pandas**: X·ª≠ l√Ω v√† thao t√°c d·ªØ li·ªáu chu·ªói th·ªùi gian
- **numpy**: T√≠nh to√°n s·ªë h·ªçc v√† th·ªëng k√™
- **matplotlib**: V·∫Ω bi·ªÉu ƒë·ªì v√† tr·ª±c quan h√≥a k·∫øt qu·∫£

---

## C·∫•u Tr√∫c D·ª± √Ån

```
statistical_model/
‚îú‚îÄ‚îÄ ARIMA_model.py              # File ch√≠nh ch·ª©a to√†n b·ªô pipeline
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ monthlyretailsales.csv  # D·ªØ li·ªáu ƒë·∫ßu v√†o
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ ARIMA_model/            # Th∆∞ m·ª•c ch·ª©a k·∫øt qu·∫£
‚îÇ       ‚îú‚îÄ‚îÄ *.png               # C√°c bi·ªÉu ƒë·ªì
‚îÇ       ‚îú‚îÄ‚îÄ *.log               # C√°c file log
‚îÇ       ‚îî‚îÄ‚îÄ *.txt               # C√°c b√°o c√°o ph√¢n t√≠ch
‚îî‚îÄ‚îÄ README.md                   # File n√†y
```

---

## Gi·∫£i Th√≠ch Code Chi Ti·∫øt

### 1. C·∫•u Tr√∫c T·ªïng Quan

File `ARIMA_model.py` ƒë∆∞·ª£c t·ªï ch·ª©c th√†nh c√°c module ch·ª©c nƒÉng r√µ r√†ng:

```python
# 1. PATH MANAGEMENT - Qu·∫£n l√Ω ƒë∆∞·ªùng d·∫´n
# 2. LOGGER - H·ªá th·ªëng ghi log
# 3. LOAD DATA - T·∫£i d·ªØ li·ªáu
# 4. PLOT - V·∫Ω bi·ªÉu ƒë·ªì
# 5. ADF - Ki·ªÉm ƒë·ªãnh t√≠nh d·ª´ng
# 6. TRANSFORM - Bi·∫øn ƒë·ªïi d·ªØ li·ªáu
# 7. SPLIT - Chia t·∫≠p train/test
# 8. ARIMA - X√¢y d·ª±ng m√¥ h√¨nh
# 9. RESIDUALS - Ch·∫©n ƒëo√°n ph·∫ßn d∆∞
# 10. FORECAST & EVAL - D·ª± b√°o v√† ƒë√°nh gi√°
# 11. MAIN - H√†m ƒëi·ªÅu khi·ªÉn ch√≠nh
```

### 2. Qu·∫£n L√Ω ƒê∆∞·ªùng D·∫´n (PATH MANAGEMENT)

```python
def get_base_dir() -> Path:
    """L·∫•y ƒë∆∞·ªùng d·∫´n th∆∞ m·ª•c g·ªëc ch·ª©a file script hi·ªán t·∫°i."""
    return Path(__file__).resolve().parent

def get_data_path() -> Path:
    """L·∫•y ƒë∆∞·ªùng d·∫´n tuy·ªát ƒë·ªëi ƒë·∫øn file d·ªØ li·ªáu CSV."""
    return get_base_dir() / "data" / "monthlyretailsales.csv"

def get_log_dir() -> Path:
    """T·ª± ƒë·ªông t·∫°o th∆∞ m·ª•c logs n·∫øu ch∆∞a t·ªìn t·∫°i."""
    log_dir = get_base_dir() / "logs" / "ARIMA_model"
    log_dir.mkdir(parents=True, exist_ok=True)
    return log_dir
```

**Gi·∫£i th√≠ch**: S·ª≠ d·ª•ng `pathlib.Path` ƒë·ªÉ qu·∫£n l√Ω ƒë∆∞·ªùng d·∫´n m·ªôt c√°ch an to√†n v√† t·ª± ƒë·ªông, tr√°nh l·ªói khi ch·∫°y t·ª´ c√°c th∆∞ m·ª•c kh√°c nhau.

### 3. H·ªá Th·ªëng Logger

Code s·ª≠ d·ª•ng 6 logger ri√™ng bi·ªát ƒë·ªÉ theo d√µi t·ª´ng kh√≠a c·∫°nh c·ªßa pipeline:

```python
main_logger   # Theo d√µi lu·ªìng th·ª±c thi ch√≠nh (m·ªói l·∫ßn ch·∫°y t·∫°o file ri√™ng)
lag_logger    # Ghi l·∫°i g·ª£i √Ω v·ªÅ b·∫≠c p v√† q t·ª´ ACF/PACF
adf_logger    # Chi ti·∫øt k·∫øt qu·∫£ ki·ªÉm ƒë·ªãnh t√≠nh d·ª´ng
ic_logger     # Ch·ªâ s·ªë AIC/BIC ƒë·ªÉ so s√°nh m√¥ h√¨nh
eval_logger   # K·∫øt qu·∫£ ƒë√°nh gi√° (MAE, RMSE, MAPE)
res_logger    # Ch·∫©n ƒëo√°n ph·∫ßn d∆∞ (residuals)
```

**L·ª£i √≠ch**: 
- D·ªÖ d√†ng debug v√† theo d√µi t·ª´ng b∆∞·ªõc
- L∆∞u tr·ªØ l·ªãch s·ª≠ c√°c l·∫ßn ch·∫°y
- Ph√¢n t√≠ch k·∫øt qu·∫£ m·ªôt c√°ch c√≥ h·ªá th·ªëng

### 4. T·∫£i v√† X·ª≠ L√Ω D·ªØ Li·ªáu

```python
def load_data() -> pd.Series:
    path = get_data_path()
    if not path.exists():
        raise FileNotFoundError(f"Dataset not found: {path}")
    
    df = pd.read_csv(path)
    df["date"] = pd.to_datetime(df["date"])
    df.set_index("date", inplace=True)
    ts = df.iloc[:, 0]
    ts = ts.asfreq("MS")  # Monthly Start frequency
    return ts
```

**Gi·∫£i th√≠ch**:
- ƒê·ªçc CSV v√† chuy·ªÉn c·ªôt `date` th√†nh index
- `asfreq("MS")` ƒë·∫£m b·∫£o t·∫ßn su·∫•t d·ªØ li·ªáu l√† h√†ng th√°ng (Monthly Start)
- Tr·∫£ v·ªÅ `pd.Series` v·ªõi index l√† datetime

### 5. Ki·ªÉm ƒê·ªãnh T√≠nh D·ª´ng (ADF Test)

```python
def adf_test(ts: pd.Series, d: int = 0):
    """Th·ª±c hi·ªán ki·ªÉm ƒë·ªãnh Augmented Dickey-Fuller."""
    stat, pval = adfuller(ts.dropna())[0:2]
    
    if pval < 0.05:
        adf_logger.info("Conclusion: Stationary")
    else:
        adf_logger.info("Conclusion: Non-stationary")
    
    return stat, pval
```

**Gi·∫£i th√≠ch**:
- **ADF Test** ki·ªÉm tra xem chu·ªói c√≥ t√≠nh d·ª´ng (stationary) hay kh√¥ng
- **H0**: Chu·ªói c√≥ unit root (kh√¥ng d·ª´ng)
- **H1**: Chu·ªói d·ª´ng
- N·∫øu `p-value < 0.05`: B√°c b·ªè H0 ‚Üí Chu·ªói d·ª´ng

**K·∫øt qu·∫£ t·ª´ log**:
```
d=0: p-value = 1.0 > 0.05 ‚Üí Kh√¥ng d·ª´ng
d=1: p-value = 0.117 > 0.05 ‚Üí Kh√¥ng d·ª´ng  
d=2: p-value = 3.54e-18 < 0.05 ‚Üí D·ª´ng ‚úì
```

### 6. Sai Ph√¢n (Differencing)

```python
def difference(ts: pd.Series, d: int = 1) -> pd.Series:
    """Th·ª±c hi·ªán l·∫•y sai ph√¢n b·∫≠c d ƒë·ªÉ lo·∫°i b·ªè xu h∆∞·ªõng."""
    temp_ts = ts.copy()
    for _ in range(d):
        temp_ts = temp_ts.diff().dropna()
    return temp_ts
```

**Gi·∫£i th√≠ch**:
- Sai ph√¢n b·∫≠c 1: `y_t = x_t - x_{t-1}`
- Sai ph√¢n b·∫≠c 2: √Åp d·ª•ng sai ph√¢n 2 l·∫ßn
- M·ª•c ƒë√≠ch: Lo·∫°i b·ªè xu h∆∞·ªõng (trend) ƒë·ªÉ ƒë·∫°t t√≠nh d·ª´ng

### 7. Ph√¢n T√≠ch ACF/PACF

```python
def suggest_arima_lags(ts: pd.Series, max_lag: int = 20, d_val: int = 1):
    """G·ª£i √Ω b·∫≠c p (AR) v√† q (MA) d·ª±a tr√™n ACF/PACF."""
    n = len(ts.dropna())
    conf = 1.96 / np.sqrt(n)  # Ng∆∞·ª°ng tin c·∫≠y 95%
    
    acf_vals = acf(ts.dropna(), nlags=max_lag)
    pacf_vals = pacf(ts.dropna(), nlags=max_lag)
    
    # T√¨m c√°c lag v∆∞·ª£t ng∆∞·ª°ng
    q_lags = [lag for lag, val in enumerate(acf_vals[1:], start=1) 
              if abs(val) > conf]
    p_lags = [lag for lag, val in enumerate(pacf_vals[1:], start=1) 
              if abs(val) > conf]
    
    return p_lags, q_lags
```

**Gi·∫£i th√≠ch**:
- **ACF (Autocorrelation Function)**: ƒêo t∆∞∆°ng quan gi·ªØa gi√° tr·ªã hi·ªán t·∫°i v√† c√°c gi√° tr·ªã qu√° kh·ª©
- **PACF (Partial Autocorrelation Function)**: ƒêo t∆∞∆°ng quan tr·ª±c ti·∫øp gi·ªØa `y_t` v√† `y_{t-k}` sau khi lo·∫°i b·ªè ·∫£nh h∆∞·ªüng c·ªßa c√°c lag trung gian
- **Ng∆∞·ª°ng tin c·∫≠y**: `¬±1.96/‚àön` cho kho·∫£ng tin c·∫≠y 95%
- **Quy t·∫Øc**:
  - **PACF c·∫Øt c·ª•t t·∫°i lag p** ‚Üí G·ª£i √Ω b·∫≠c AR = p
  - **ACF c·∫Øt c·ª•t t·∫°i lag q** ‚Üí G·ª£i √Ω b·∫≠c MA = q

**K·∫øt qu·∫£ t·ª´ log**:
```
Suggested p (AR) lags from PACF: [1, 2, 3, 4, 5, 6, 7, 10, 11, 12, 16]
Suggested q (MA) lags from ACF: [1, 2, 10, 11, 12, 13]
Recommended ARIMA candidates: [(1, 2, 1), (1, 2, 2), (2, 2, 1), (2, 2, 2)]
```

### 8. X√¢y D·ª±ng M√¥ H√¨nh ARIMA

```python
def fit_arima(train: pd.Series, order: tuple):
    """Hu·∫•n luy·ªán m√¥ h√¨nh ARIMA v·ªõi tham s·ªë (p, d, q)."""
    model = ARIMA(train, order=order)
    result = model.fit()
    
    ic_logger.info(f"ARIMA{order}")
    ic_logger.info(f"AIC: {result.aic:.4f}")
    ic_logger.info(f"BIC: {result.bic:.4f}")
    
    return result
```

**Gi·∫£i th√≠ch**:
- **ARIMA(p, d, q)**:
  - `p`: B·∫≠c t·ª± h·ªìi quy (AR)
  - `d`: B·∫≠c sai ph√¢n (I)
  - `q`: B·∫≠c trung b√¨nh tr∆∞·ª£t (MA)
- **AIC/BIC**: Ch·ªâ s·ªë so s√°nh m√¥ h√¨nh (c√†ng nh·ªè c√†ng t·ªët)

### 9. X√¢y D·ª±ng M√¥ H√¨nh SARIMA

```python
def fit_sarima(train: pd.Series, order: tuple, s_order: tuple):
    """Hu·∫•n luy·ªán m√¥ h√¨nh SARIMA v·ªõi th√†nh ph·∫ßn m√πa v·ª•."""
    model = ARIMA(train, order=order, seasonal_order=s_order)
    result = model.fit()
    return result
```

**Gi·∫£i th√≠ch**:
- **SARIMA(p, d, q)(P, D, Q, s)**:
  - `(p, d, q)`: Tham s·ªë cho th√†nh ph·∫ßn kh√¥ng m√πa v·ª•
  - `(P, D, Q, s)`: Tham s·ªë cho th√†nh ph·∫ßn m√πa v·ª•
  - `s`: Chu k·ª≥ m√πa v·ª• (12 cho d·ªØ li·ªáu h√†ng th√°ng)
- **∆Øu ƒëi·ªÉm**: X·ª≠ l√Ω ƒë∆∞·ª£c c·∫£ xu h∆∞·ªõng v√† t√≠nh m√πa v·ª•

### 10. Ch·∫©n ƒêo√°n Ph·∫ßn D∆∞ (Residual Diagnostics)

```python
def residual_diagnostics(residuals: pd.Series, order: tuple):
    """Ki·ªÉm tra ph·∫ßn d∆∞ c√≥ ph·∫£i l√† nhi·ªÖu tr·∫Øng kh√¥ng."""
    mean_res = residuals.mean()
    
    if abs(mean_res) < 0.01:
        res_logger.info("Residual mean approx 0 -> OK")
    else:
        res_logger.info("Residual mean != 0 -> CHECK")
    
    # V·∫Ω bi·ªÉu ƒë·ªì ph·∫ßn d∆∞ v√† ACF c·ªßa ph·∫ßn d∆∞
    plot_residuals(residuals, order)
    plot_residuals_acf(residuals, order)
```

**Gi·∫£i th√≠ch**:
- **Ph·∫ßn d∆∞ t·ªët** ph·∫£i c√≥:
  - Trung b√¨nh ‚âà 0
  - Kh√¥ng c√≥ t∆∞∆°ng quan (ACF c·ªßa ph·∫ßn d∆∞ n·∫±m trong ng∆∞·ª°ng tin c·∫≠y)
  - Ph√¢n ph·ªëi chu·∫©n
- N·∫øu ph·∫ßn d∆∞ kh√¥ng ph·∫£i nhi·ªÖu tr·∫Øng ‚Üí M√¥ h√¨nh ch∆∞a t·ªët, c·∫ßn ƒëi·ªÅu ch·ªânh

**K·∫øt qu·∫£ t·ª´ log**:
```
ARIMA(2, 2, 1): Residual mean = 0.086 ‚Üí CHECK (h∆°i cao)
SARIMA(1, 2, 1)x(1, 1, 1, 12): Residual mean = 0.010 ‚Üí OK ‚úì
```

### 11. D·ª± B√°o v√† ƒê√°nh Gi√°

```python
def forecast(model, steps: int) -> pd.Series:
    """D·ª± b√°o c√°c gi√° tr·ªã t∆∞∆°ng lai."""
    return model.forecast(steps=steps)

def evaluation(test: pd.Series, pred: pd.Series, model_name: str):
    """T√≠nh to√°n c√°c ch·ªâ s·ªë ƒë√°nh gi√°."""
    mae = np.mean(np.abs(test - pred))
    rmse = np.sqrt(np.mean((test - pred) ** 2))
    mape = np.mean(np.abs((test - pred) / test)) * 100
```

**Gi·∫£i th√≠ch c√°c ch·ªâ s·ªë**:
- **MAE (Mean Absolute Error)**: Sai s·ªë tuy·ªát ƒë·ªëi trung b√¨nh
- **RMSE (Root Mean Squared Error)**: CƒÉn b·∫≠c hai c·ªßa sai s·ªë b√¨nh ph∆∞∆°ng trung b√¨nh (nh·∫°y c·∫£m v·ªõi outlier)
- **MAPE (Mean Absolute Percentage Error)**: Sai s·ªë ph·∫ßn trƒÉm trung b√¨nh (d·ªÖ hi·ªÉu, kh√¥ng ph·ª• thu·ªôc ƒë∆°n v·ªã)

---

## Ph√¢n T√≠ch Chi Ti·∫øt 3 B√°o C√°o Ch√≠nh

Ph·∫ßn n√†y t·∫≠p trung ph√¢n t√≠ch chi ti·∫øt 3 file b√°o c√°o quan tr·ªçng nh·∫•t trong qu√° tr√¨nh x√¢y d·ª±ng m√¥ h√¨nh ARIMA/SARIMA:

---

## 1. B√°o C√°o Ki·ªÉm ƒê·ªãnh T√≠nh D·ª´ng: `stationarity_test_YYYYMMDD_HHMMSS.txt`

### N·ªôi Dung B√°o C√°o

```
Stationarity Test Results (Augmented Dickey-Fuller Test)
============================================================
Original data length: 204
Date range: 1991-07-01 00:00:00 to 2008-06-01 00:00:00

============================================================
TEST RESULTS FOR DIFFERENT DIFFERENCING ORDERS
============================================================

Differencing Order d = 0 (Original):
  ADF Statistic: 3.1452
  p-value: 1.0000
  Critical Values:
    1%: -3.4656
    5%: -2.8770
    10%: -2.5750
  Stationary: No (p-value >= 0.05)
  Number of observations: 204

Differencing Order d = 1 (Differenced 1 time):
  ADF Statistic: -2.4952
  p-value: 0.1167
  Critical Values:
    1%: -3.4658
    5%: -2.8771
    10%: -2.5751
  Stationary: No (p-value >= 0.05)
  Number of observations: 203

Differencing Order d = 2 (Differenced 2 times):
  ADF Statistic: -10.2923
  p-value: 0.0000
  Critical Values:
    1%: -3.4658
    5%: -2.8771
    10%: -2.5751
  Stationary: Yes (p-value < 0.05) ‚úì
  Number of observations: 202

============================================================
Suggested Differencing Order (d): 2
```

### Ph√¢n T√≠ch Chi Ti·∫øt

#### **B∆∞·ªõc 1: Ki·ªÉm ƒë·ªãnh chu·ªói g·ªëc (d = 0)**

| Ch·ªâ S·ªë | Gi√° Tr·ªã | √ù Nghƒ©a |
|--------|---------|---------|
| **ADF Statistic** | 3.1452 | Gi√° tr·ªã d∆∞∆°ng, r·∫•t xa c√°c gi√° tr·ªã t·ªõi h·∫°n √¢m |
| **p-value** | 1.0000 | C·ª±c k·ª≥ cao ‚Üí Kh√¥ng th·ªÉ b√°c b·ªè H0 |
| **Critical Value (5%)** | -2.8770 | ADF Statistic (3.1452) > -2.8770 |
| **K·∫øt lu·∫≠n** | **Kh√¥ng d·ª´ng** | Chu·ªói c√≥ unit root, c·∫ßn sai ph√¢n |

**Gi·∫£i th√≠ch**: 
- ADF Statistic d∆∞∆°ng v√† l·ªõn cho th·∫•y chu·ªói c√≥ xu h∆∞·ªõng tƒÉng m·∫°nh
- p-value = 1.0 nghƒ©a l√† x√°c su·∫•t chu·ªói d·ª´ng g·∫ßn nh∆∞ b·∫±ng 0
- **Quy·∫øt ƒë·ªãnh**: C·∫ßn th·ª±c hi·ªán sai ph√¢n

#### **B∆∞·ªõc 2: Ki·ªÉm ƒë·ªãnh sau sai ph√¢n b·∫≠c 1 (d = 1)**

| Ch·ªâ S·ªë | Gi√° Tr·ªã | √ù Nghƒ©a |
|--------|---------|---------|
| **ADF Statistic** | -2.4952 | ƒê√£ chuy·ªÉn sang √¢m nh∆∞ng ch∆∞a ƒë·ªß nh·ªè |
| **p-value** | 0.1167 | V·∫´n > 0.05 ‚Üí Ch∆∞a ƒë·∫°t ng∆∞·ª°ng √Ω nghƒ©a |
| **Critical Value (5%)** | -2.8771 | ADF Statistic (-2.4952) > -2.8771 |
| **K·∫øt lu·∫≠n** | **V·∫´n kh√¥ng d·ª´ng** | C·∫ßn sai ph√¢n th√™m 1 l·∫ßn n·ªØa |

**Gi·∫£i th√≠ch**:
- ADF Statistic ƒë√£ √¢m nh∆∞ng ch∆∞a v∆∞·ª£t qua ng∆∞·ª°ng -2.8771
- p-value = 0.117 > 0.05 ‚Üí Ch∆∞a ƒë·ªß b·∫±ng ch·ª©ng ƒë·ªÉ k·∫øt lu·∫≠n chu·ªói d·ª´ng
- **Quy·∫øt ƒë·ªãnh**: C·∫ßn sai ph√¢n b·∫≠c 2

#### **B∆∞·ªõc 3: Ki·ªÉm ƒë·ªãnh sau sai ph√¢n b·∫≠c 2 (d = 2)**

| Ch·ªâ S·ªë | Gi√° Tr·ªã | √ù Nghƒ©a |
|--------|---------|---------|
| **ADF Statistic** | -10.2923 | R·∫•t √¢m, v∆∞·ª£t xa t·∫•t c·∫£ gi√° tr·ªã t·ªõi h·∫°n |
| **p-value** | 0.0000 | C·ª±c k·ª≥ nh·ªè (< 0.0001) |
| **Critical Value (1%)** | -3.4658 | ADF Statistic (-10.29) << -3.47 |
| **Critical Value (5%)** | -2.8771 | ADF Statistic (-10.29) << -2.88 |
| **K·∫øt lu·∫≠n** | **D·ª´ng ‚úì** | Chu·ªói ƒë√£ ƒë·∫°t t√≠nh d·ª´ng |

**Gi·∫£i th√≠ch**:
- ADF Statistic = -10.29 r·∫•t nh·ªè, v∆∞·ª£t xa c·∫£ ng∆∞·ª°ng 1% (-3.47)
- p-value ‚âà 0 ‚Üí B·∫±ng ch·ª©ng m·∫°nh m·∫Ω ƒë·ªÉ b√°c b·ªè H0
- **Quy·∫øt ƒë·ªãnh cu·ªëi c√πng**: S·ª≠ d·ª•ng **d = 2** cho m√¥ h√¨nh ARIMA

### B·∫£ng T·ªïng H·ª£p So S√°nh

| B·∫≠c Sai Ph√¢n | ADF Statistic | p-value | So v·ªõi CV 5% | K·∫øt Lu·∫≠n | S·ªë Quan S√°t |
|--------------|---------------|---------|--------------|----------|-------------|
| **d = 0** | 3.1452 | 1.0000 | > -2.8770 | Kh√¥ng d·ª´ng | 204 |
| **d = 1** | -2.4952 | 0.1167 | > -2.8771 | Kh√¥ng d·ª´ng | 203 |
| **d = 2** | **-10.2923** | **0.0000** | **<< -2.8771** | **D·ª´ng** | 202 |

### K·∫øt Lu·∫≠n

1. **Chu·ªói g·ªëc c√≥ xu h∆∞·ªõng m·∫°nh**: ADF Statistic d∆∞∆°ng (3.15) cho th·∫•y xu h∆∞·ªõng tƒÉng r√µ r·ªát
2. **Sai ph√¢n b·∫≠c 1 ch∆∞a ƒë·ªß**: V·∫´n c√≤n m·ªôt ph·∫ßn xu h∆∞·ªõng ch∆∞a ƒë∆∞·ª£c lo·∫°i b·ªè
3. **Sai ph√¢n b·∫≠c 2 ƒë·∫°t t√≠nh d·ª´ng**: ADF Statistic = -10.29 cho th·∫•y chu·ªói ƒë√£ ho√†n to√†n d·ª´ng
4. **M·∫•t 2 quan s√°t**: M·ªói l·∫ßn sai ph√¢n l√†m m·∫•t 1 quan s√°t (204 ‚Üí 203 ‚Üí 202)

---

## üìà 2. B√°o C√°o Ph√¢n T√≠ch ACF/PACF: `ACF_PACF_Analysis_YYYYMMDD_HHMMSS.txt`

### N·ªôi Dung B√°o C√°o

```
ACF and PACF Analysis for ARIMA Model Selection
============================================================
Data length: 202
Date range: 1991-09-01 00:00:00 to 2008-06-01 00:00:00
Mean: -0.02
Std deviation: 3.71

============================================================
THRESHOLD SELECTION EXPLANATION
============================================================
Sample size (n): 202

Confidence Interval Thresholds:
  90% CI threshold: ¬±0.1157
  95% CI threshold: ¬±0.1379 (used for analysis)
  99% CI threshold: ¬±0.1812

Threshold Used: 0.1379

Origin of Z-Score Values (1.65, 1.96, 2.58):
  These are critical values (z-scores) from the Standard Normal Distribution:
  - 1.65 ‚âà z(0.95)  for 90% CI
  - 1.96 ‚âà z(0.975) for 95% CI
  - 2.58 ‚âà z(0.995) for 99% CI

  Statistical Basis:
  Under the null hypothesis (no autocorrelation),
  ACF/PACF values follow approximately N(0, 1/‚àön)
  CI = ¬±z_Œ±/2 / ‚àön

============================================================
Significant PACF lags (|PACF| > 0.1379) - for AR order:
  Lag 1: -0.6346
  Lag 2: -0.3673
  Lag 3: -0.3032
  Lag 4: -0.3189
  Lag 5: -0.2062
  Lag 6: -0.1817
  Lag 7: -0.1527
  Lag 10: 0.1872

============================================================
Significant ACF lags (|ACF| > 0.1379) - for MA order:
  Lag 1: -0.6346
  Lag 2: 0.1833
  Lag 10: 0.1771

============================================================
Suggested ARIMA order: AR(1), I(d), MA(1)
Note: Differencing order (d) is determined separately using ADF test
```

### Ph√¢n T√≠ch Chi Ti·∫øt

#### **A. Th√¥ng Tin C∆° B·∫£n v·ªÅ D·ªØ Li·ªáu**

| Th√¥ng S·ªë | Gi√° Tr·ªã | √ù Nghƒ©a |
|----------|---------|---------|
| **ƒê·ªô d√†i chu·ªói** | 202 | Sau khi sai ph√¢n b·∫≠c 2 (t·ª´ 204) |
| **Kho·∫£ng th·ªùi gian** | 1991-09 ƒë·∫øn 2008-06 | ~17 nƒÉm d·ªØ li·ªáu |
| **Trung b√¨nh** | -0.02 | G·∫ßn 0 ‚Üí Chu·ªói ƒë√£ ƒë∆∞·ª£c chu·∫©n h√≥a t·ªët |
| **ƒê·ªô l·ªách chu·∫©n** | 3.71 | ƒê·ªô bi·∫øn thi√™n c·ªßa chu·ªói sau sai ph√¢n |

#### **B. Ng∆∞·ª°ng Tin C·∫≠y (Confidence Thresholds)**

**C√¥ng th·ª©c t√≠nh**: `CI = ¬±z_(Œ±/2) / ‚àön`

V·ªõi n = 202:
- **90% CI**: ¬±1.645 / ‚àö202 = **¬±0.1157**
- **95% CI**: ¬±1.960 / ‚àö202 = **¬±0.1379** ‚Üê **S·ª≠ d·ª•ng cho ph√¢n t√≠ch**
- **99% CI**: ¬±2.576 / ‚àö202 = **¬±0.1812**

**Gi·∫£i th√≠ch**: 
- Ng∆∞·ª°ng 95% ƒë∆∞·ª£c ch·ªçn v√¨ c√¢n b·∫±ng gi·ªØa ƒë·ªô ch√≠nh x√°c v√† ƒë·ªô nh·∫°y
- Gi√° tr·ªã ACF/PACF v∆∞·ª£t qu√° ¬±0.1379 ƒë∆∞·ª£c coi l√† c√≥ √Ω nghƒ©a th·ªëng k√™

#### **C. Ph√¢n T√≠ch PACF (Partial Autocorrelation Function) - X√°c ƒë·ªãnh b·∫≠c AR (p)**

**C√°c lag c√≥ √Ω nghƒ©a th·ªëng k√™** (|PACF| > 0.1379):

| Lag | PACF Value | |PACF| | V∆∞·ª£t Ng∆∞·ª°ng | √ù Nghƒ©a |
|-----|------------|-------|-------------|----------|
| **1** | -0.6346 | 0.6346 | R·∫•t l·ªõn | T∆∞∆°ng quan tr·ª±c ti·∫øp m·∫°nh v·ªõi lag 1 |
| **2** | -0.3673 | 0.3673 | L·ªõn | T∆∞∆°ng quan tr·ª±c ti·∫øp v·ªõi lag 2 |
| **3** | -0.3032 | 0.3032 | L·ªõn | T∆∞∆°ng quan tr·ª±c ti·∫øp v·ªõi lag 3 |
| **4** | -0.3189 | 0.3189 | L·ªõn | T∆∞∆°ng quan tr·ª±c ti·∫øp v·ªõi lag 4 |
| **5** | -0.2062 | 0.2062 | V·ª´a | T∆∞∆°ng quan tr·ª±c ti·∫øp v·ªõi lag 5 |
| **6** | -0.1817 | 0.1817 | V·ª´a | T∆∞∆°ng quan tr·ª±c ti·∫øp v·ªõi lag 6 |
| **7** | -0.1527 | 0.1527 | Nh·ªè | T∆∞∆°ng quan tr·ª±c ti·∫øp v·ªõi lag 7 |
| **10** | 0.1872 | 0.1872 | V·ª´a | T∆∞∆°ng quan tr·ª±c ti·∫øp v·ªõi lag 10 |

**Ph√¢n t√≠ch**:
- **Lag 1 c√≥ gi√° tr·ªã tuy·ªát ƒë·ªëi l·ªõn nh·∫•t** (-0.63) ‚Üí G·ª£i √Ω m·∫°nh v·ªÅ AR(1)
- **Lag 2 c≈©ng r·∫•t l·ªõn** (-0.37) ‚Üí C√≥ th·ªÉ c·∫ßn AR(2)
- **Nhi·ªÅu lag v∆∞·ª£t ng∆∞·ª°ng** ‚Üí C√≥ th·ªÉ c·∫ßn m√¥ h√¨nh AR ph·ª©c t·∫°p h∆°n
- **Lag 10 c√≥ gi√° tr·ªã d∆∞∆°ng** (0.19) ‚Üí C√≥ th·ªÉ li√™n quan ƒë·∫øn t√≠nh m√πa v·ª•

**G·ª£i √Ω b·∫≠c AR (p)**: 
- **p = 1**: D·ª±a tr√™n lag 1 c√≥ gi√° tr·ªã l·ªõn nh·∫•t
- **p = 2**: N·∫øu mu·ªën b·∫Øt ƒë∆∞·ª£c t∆∞∆°ng quan v·ªõi lag 2

#### **D. Ph√¢n T√≠ch ACF (Autocorrelation Function) - X√°c ƒë·ªãnh b·∫≠c MA (q)**

**C√°c lag c√≥ √Ω nghƒ©a th·ªëng k√™** (|ACF| > 0.1379):

| Lag | ACF Value | |ACF| | V∆∞·ª£t Ng∆∞·ª°ng | √ù Nghƒ©a |
|-----|----------|-------|-------------|----------|
| **1** | -0.6346 | 0.6346 | R·∫•t l·ªõn | T∆∞∆°ng quan t·ªïng th·ªÉ m·∫°nh v·ªõi lag 1 |
| **2** | 0.1833 | 0.1833 | V·ª´a | T∆∞∆°ng quan t·ªïng th·ªÉ v·ªõi lag 2 |
| **10** | 0.1771 | 0.1771 | V·ª´a | T∆∞∆°ng quan t·ªïng th·ªÉ v·ªõi lag 10 |

**Ph√¢n t√≠ch**:
- **Lag 1 c√≥ gi√° tr·ªã tuy·ªát ƒë·ªëi l·ªõn nh·∫•t** (-0.63) ‚Üí G·ª£i √Ω m·∫°nh v·ªÅ MA(1)
- **Lag 2 v√† 10 c√≥ gi√° tr·ªã v·ª´a** ‚Üí C√≥ th·ªÉ c·∫ßn MA(2) ho·∫∑c c√≥ t√≠nh m√πa v·ª•
- **√çt lag v∆∞·ª£t ng∆∞·ª°ng h∆°n PACF** ‚Üí M√¥ h√¨nh MA ƒë∆°n gi·∫£n h∆°n

**G·ª£i √Ω b·∫≠c MA (q)**:
- **q = 1**: D·ª±a tr√™n lag 1 c√≥ gi√° tr·ªã l·ªõn nh·∫•t
- **q = 2**: N·∫øu mu·ªën b·∫Øt ƒë∆∞·ª£c t∆∞∆°ng quan v·ªõi lag 2

#### **E. D·∫•u Hi·ªáu T√≠nh M√πa V·ª•**

**Quan s√°t quan tr·ªçng**:
- **Lag 10 v√† 12** (kh√¥ng hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß trong b√°o c√°o nh∆∞ng c√≥ trong suggested_lags.log) xu·∫•t hi·ªán trong c·∫£ ACF v√† PACF
- ƒêi·ªÅu n√†y g·ª£i √Ω m·∫°nh v·ªÅ **t√≠nh m√πa v·ª• v·ªõi chu k·ª≥ 12 th√°ng**
- **K·∫øt lu·∫≠n**: N√™n s·ª≠ d·ª•ng **SARIMA** thay v√¨ ARIMA ƒë∆°n thu·∫ßn

### B·∫£ng T·ªïng H·ª£p G·ª£i √Ω M√¥ H√¨nh

| Tham S·ªë | G·ª£i √Ω t·ª´ PACF | G·ª£i √Ω t·ª´ ACF | Gi√° Tr·ªã Ch·ªçn | L√Ω Do |
|---------|---------------|--------------|--------------|-------|
| **p (AR)** | Lag 1, 2, 3, 4... | - | **1 ho·∫∑c 2** | Lag 1 v√† 2 c√≥ gi√° tr·ªã l·ªõn nh·∫•t |
| **d (I)** | - | - | **2** | T·ª´ ADF test |
| **q (MA)** | - | Lag 1, 2, 10 | **1 ho·∫∑c 2** | Lag 1 c√≥ gi√° tr·ªã l·ªõn nh·∫•t |
| **s (Seasonal)** | Lag 10, 12 | Lag 10, 12 | **12** | D·∫•u hi·ªáu m√πa v·ª• r√µ r·ªát |

**M√¥ h√¨nh ƒë·ªÅ xu·∫•t**:
- **ARIMA(1, 2, 1)** ho·∫∑c **ARIMA(2, 2, 1)** - M√¥ h√¨nh c∆° b·∫£n
- **SARIMA(1, 2, 1)(1, 1, 1, 12)** - M√¥ h√¨nh c√≥ t√≠nh m√πa v·ª• (khuy·∫øn ngh·ªã)

---

## üìê 3. B·∫£ng Tra C·ª©u Z-Score: `z_table_YYYYMMDD_HHMMSS.txt`

### N·ªôi Dung B√°o C√°o

```
================================================================================
STANDARD NORMAL DISTRIBUTION (Z-TABLE)
Critical Values for ACF / PACF Confidence Intervals
================================================================================

Statistical assumption:
Under the null hypothesis of no autocorrelation,
sample ACF and PACF values are approximately distributed as:
  N(0, 1 / ‚àön)

Confidence interval formula:
  CI = ¬± z_(Œ±/2) / ‚àön

================================================================================
COMMONLY USED CONFIDENCE LEVELS
================================================================================
Confidence Level      Two-Tailed Œ±      Z-Score (zŒ±/2)
--------------------------------------------------------------------------------
  80.0%              0.200               1.2816
  85.0%              0.150               1.4395
  90.0%              0.100               1.6449
  95.0%              0.050               1.9600
  99.0%              0.010               2.5758
  99.9%              0.001               3.2905

================================================================================
DETAILED Z-TABLE (COMMON PERCENTILES)
================================================================================
Percentile      Z-Score      Confidence Level     Usage
--------------------------------------------------------------------------------
 50.00%        0.0000      50%                 Median
 60.00%        0.2533      60%                 
 70.00%        0.5244      70%                 
 75.00%        0.6745      75%                 
 80.00%        0.8416      80%                 Common threshold
 85.00%        1.0364      85%                 
 90.00%        1.2816      90%                 Common threshold
 95.00%        1.6449      95%                 Very common
 97.50%        1.9600      97.5%               95% CI (two-tailed)
 99.00%        2.3263      99%                 Common threshold
 99.50%        2.5758      99.5%               99% CI (two-tailed)
 99.90%        3.0902      99.9%               High confidence
 99.95%        3.2905      99.95%              Very high confidence

================================================================================
APPLICATION TO YOUR DATASET
================================================================================
Sample size (n): 204

Calculated confidence thresholds:
  90% CI  : ¬±0.1152   (z = 1.645)
  95% CI  : ¬±0.1372   (z = 1.96)  ‚Üê used for analysis
  99% CI  : ¬±0.1803   (z = 2.576)

Interpretation for ACF/PACF plots:
- Any ACF or PACF value exceeding ¬±0.1372
  is considered statistically significant.
- Significant PACF lags suggest AR order (p).
- Significant ACF lags suggest MA order (q).
- Differencing order (d) is determined separately using ADF test.
```

### Ph√¢n T√≠ch Chi Ti·∫øt

#### **A. C∆° S·ªü To√°n H·ªçc**

**Gi·∫£ ƒë·ªãnh th·ªëng k√™**:
- D∆∞·ªõi gi·∫£ thuy·∫øt H0 (kh√¥ng c√≥ t·ª± t∆∞∆°ng quan), c√°c gi√° tr·ªã ACF/PACF m·∫´u tu√¢n theo ph√¢n ph·ªëi chu·∫©n:
  ```
  ACF/PACF ~ N(0, 1/‚àön)
  ```

**C√¥ng th·ª©c kho·∫£ng tin c·∫≠y**:
```
CI = ¬± z_(Œ±/2) / ‚àön
```

Trong ƒë√≥:
- `z_(Œ±/2)`: Z-score t·ª´ ph√¢n ph·ªëi chu·∫©n chu·∫©n h√≥a
- `n`: K√≠ch th∆∞·ªõc m·∫´u
- `Œ±`: M·ª©c √Ω nghƒ©a (significance level)

#### **B. B·∫£ng Z-Score Ph·ªï Bi·∫øn**

| M·ª©c Tin C·∫≠y | Two-Tailed Œ± | Z-Score | ·ª®ng D·ª•ng |
|-------------|--------------|---------|----------|
| **80%** | 0.200 | 1.2816 | Ng∆∞·ª°ng th·∫•p, √≠t s·ª≠ d·ª•ng |
| **85%** | 0.150 | 1.4395 | Ng∆∞·ª°ng trung b√¨nh |
| **90%** | 0.100 | 1.6449 | Ng∆∞·ª°ng ph·ªï bi·∫øn |
| **95%** | 0.050 | **1.9600** | **R·∫•t ph·ªï bi·∫øn, ti√™u chu·∫©n** |
| **99%** | 0.010 | 2.5758 | Ng∆∞·ª°ng cao, nghi√™m ng·∫∑t |
| **99.9%** | 0.001 | 3.2905 | Ng∆∞·ª°ng r·∫•t cao |

**Gi·∫£i th√≠ch**:
- **95% CI (z = 1.96)** l√† ti√™u chu·∫©n v√†ng trong th·ªëng k√™
- C√¢n b·∫±ng gi·ªØa ƒë·ªô ch√≠nh x√°c v√† kh·∫£ nƒÉng ph√°t hi·ªán t∆∞∆°ng quan
- ƒê∆∞·ª£c s·ª≠ d·ª•ng trong h·∫ßu h·∫øt c√°c nghi√™n c·ª©u khoa h·ªçc

#### **C. B·∫£ng Chi Ti·∫øt C√°c Ph√¢n V·ªã**

| Ph√¢n V·ªã | Z-Score | M·ª©c Tin C·∫≠y | C√°ch S·ª≠ D·ª•ng |
|---------|---------|-------------|--------------|
| 50% | 0.0000 | 50% | Trung v·ªã (median) |
| 75% | 0.6745 | 75% | Ph√¢n v·ªã th·ª© 3 |
| 80% | 0.8416 | 80% | Ng∆∞·ª°ng th√¥ng th∆∞·ªùng |
| 90% | 1.2816 | 90% | Ng∆∞·ª°ng th√¥ng th∆∞·ªùng |
| **95%** | **1.6449** | **95%** | **R·∫•t ph·ªï bi·∫øn** |
| **97.5%** | **1.9600** | **97.5%** | **95% CI (two-tailed)** ‚Üê **D√πng cho ACF/PACF** |
| 99% | 2.3263 | 99% | Ng∆∞·ª°ng th√¥ng th∆∞·ªùng |
| 99.5% | 2.5758 | 99.5% | 99% CI (two-tailed) |
| 99.9% | 3.0902 | 99.9% | ƒê·ªô tin c·∫≠y cao |
| 99.95% | 3.2905 | 99.95% | ƒê·ªô tin c·∫≠y r·∫•t cao |

**L∆∞u √Ω quan tr·ªçng**:
- **97.5% percentile (z = 1.96)** ƒë∆∞·ª£c d√πng cho **95% CI two-tailed**
- V√¨ two-tailed test chia Œ± th√†nh 2 ph·∫ßn: Œ±/2 ·ªü m·ªói ƒëu√¥i
- 95% CI two-tailed = 2.5% ·ªü m·ªói ƒëu√¥i = 97.5% percentile

#### **D. √Åp D·ª•ng Cho Dataset C·ª• Th·ªÉ**

**Th√¥ng tin dataset**:
- **K√≠ch th∆∞·ªõc m·∫´u (n)**: 204 quan s√°t
- **C√¥ng th·ª©c**: CI = ¬± z / ‚àö204 = ¬± z / 14.28

**B·∫£ng Ng∆∞·ª°ng Tin C·∫≠y T√≠nh To√°n**:

| M·ª©c Tin C·∫≠y | Z-Score | Ng∆∞·ª°ng T√≠nh To√°n | Ng∆∞·ª°ng L√†m Tr√≤n |
|-------------|---------|------------------|-----------------|
| 90% | 1.6449 | ¬±0.1152 | **¬±0.1157** |
| **95%** | **1.9600** | **¬±0.1372** | **¬±0.1379** ‚Üê **S·ª≠ d·ª•ng** |
| 99% | 2.5758 | ¬±0.1803 | **¬±0.1812** |

**Gi·∫£i th√≠ch**:
- Ng∆∞·ª°ng **¬±0.1379** ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x√°c ƒë·ªãnh c√°c lag c√≥ √Ω nghƒ©a th·ªëng k√™
- B·∫•t k·ª≥ gi√° tr·ªã ACF ho·∫∑c PACF n√†o v∆∞·ª£t qu√° ng∆∞·ª°ng n√†y ƒë·ªÅu ƒë∆∞·ª£c coi l√† c√≥ t∆∞∆°ng quan ƒë√°ng k·ªÉ
- Ng∆∞·ª°ng n√†y ƒë·∫£m b·∫£o 95% ƒë·ªô tin c·∫≠y trong vi·ªác ph√°t hi·ªán t·ª± t∆∞∆°ng quan

#### **E. √ù Nghƒ©a Th·ª±c Ti·ªÖn**

**Quy t·∫Øc s·ª≠ d·ª•ng**:

1. **X√°c ƒë·ªãnh b·∫≠c AR (p)**:
   - Xem bi·ªÉu ƒë·ªì PACF
   - T√¨m lag ƒë·∫ßu ti√™n m√† gi√° tr·ªã PACF v∆∞·ª£t qu√° ¬±0.1379
   - Lag ƒë√≥ ch√≠nh l√† b·∫≠c AR ƒë·ªÅ xu·∫•t

2. **X√°c ƒë·ªãnh b·∫≠c MA (q)**:
   - Xem bi·ªÉu ƒë·ªì ACF
   - T√¨m lag ƒë·∫ßu ti√™n m√† gi√° tr·ªã ACF v∆∞·ª£t qu√° ¬±0.1379
   - Lag ƒë√≥ ch√≠nh l√† b·∫≠c MA ƒë·ªÅ xu·∫•t

3. **X√°c ƒë·ªãnh t√≠nh m√πa v·ª•**:
   - N·∫øu c√≥ lag 12, 24, 36... v∆∞·ª£t ng∆∞·ª°ng ‚Üí C√≥ t√≠nh m√πa v·ª•
   - Chu k·ª≥ m√πa v·ª• (s) = lag c√≥ gi√° tr·ªã cao nh·∫•t trong c√°c lag m√πa v·ª•

**V√≠ d·ª• t·ª´ dataset**:
- **PACF lag 1 = -0.6346** >> 0.1379 ‚Üí G·ª£i √Ω AR(1) ho·∫∑c AR(2)
- **ACF lag 1 = -0.6346** >> 0.1379 ‚Üí G·ª£i √Ω MA(1)
- **Lag 12 xu·∫•t hi·ªán** ‚Üí G·ª£i √Ω t√≠nh m√πa v·ª• v·ªõi s = 12

### K·∫øt Lu·∫≠n v·ªÅ Z-Table

1. **C∆° s·ªü to√°n h·ªçc v·ªØng ch·∫Øc**: D·ª±a tr√™n ph√¢n ph·ªëi chu·∫©n chu·∫©n h√≥a N(0,1)
2. **Ng∆∞·ª°ng 95% CI l√† ti√™u chu·∫©n**: C√¢n b·∫±ng gi·ªØa ƒë·ªô ch√≠nh x√°c v√† ƒë·ªô nh·∫°y
3. **√Åp d·ª•ng tr·ª±c ti·∫øp**: Ng∆∞·ª°ng ¬±0.1379 ƒë∆∞·ª£c t√≠nh to√°n c·ª• th·ªÉ cho dataset n√†y
4. **H∆∞·ªõng d·∫´n r√µ r√†ng**: Gi√∫p x√°c ƒë·ªãnh b·∫≠c m√¥ h√¨nh m·ªôt c√°ch khoa h·ªçc

---

## T·ªïng K·∫øt 3 B√°o C√°o

### Quy Tr√¨nh X√¢y D·ª±ng M√¥ H√¨nh D·ª±a Tr√™n 3 B√°o C√°o

```
1. stationarity_test.txt
   ‚Üì
   X√°c ƒë·ªãnh d = 2 (sai ph√¢n b·∫≠c 2)

2. z_table.txt
   ‚Üì
   T√≠nh ng∆∞·ª°ng tin c·∫≠y ¬±0.1379 (95% CI)

3. ACF_PACF_Analysis.txt
   ‚Üì
   X√°c ƒë·ªãnh p v√† q d·ª±a tr√™n ng∆∞·ª°ng
   ‚Üì
   K·∫øt qu·∫£: ARIMA(1,2,1) ho·∫∑c ARIMA(2,2,1)
   + Ph√°t hi·ªán t√≠nh m√πa v·ª• ‚Üí SARIMA(1,2,1)(1,1,1,12)
```

### B·∫£ng T·ªïng H·ª£p Quy·∫øt ƒê·ªãnh

| Tham S·ªë | Ngu·ªìn X√°c ƒê·ªãnh | Gi√° Tr·ªã | B√°o C√°o Tham Kh·∫£o |
|---------|----------------|---------|-------------------|
| **d** | ADF Test | **2** | `stationarity_test.txt` |
| **Ng∆∞·ª°ng CI** | Z-Table | **¬±0.1379** | `z_table.txt` |
| **p** | PACF Analysis | **1 ho·∫∑c 2** | `ACF_PACF_Analysis.txt` |
| **q** | ACF Analysis | **1** | `ACF_PACF_Analysis.txt` |
| **s** | ACF/PACF lag 12 | **12** | `ACF_PACF_Analysis.txt` |

### M√¥ H√¨nh Cu·ªëi C√πng

D·ª±a tr√™n 3 b√°o c√°o, m√¥ h√¨nh ƒë∆∞·ª£c ƒë·ªÅ xu·∫•t:

1. **ARIMA(2, 2, 1)**: M√¥ h√¨nh c∆° b·∫£n, b·ªè qua t√≠nh m√πa v·ª•
2. **SARIMA(1, 2, 1)(1, 1, 1, 12)**: M√¥ h√¨nh ƒë·∫ßy ƒë·ªß, bao g·ªìm t√≠nh m√πa v·ª• **Khuy·∫øn ngh·ªã**

---

## Ph√¢n T√≠ch H√¨nh ·∫¢nh ƒê·∫ßu Ra

### 1. `01_original_series.png`

**M√¥ t·∫£**: Bi·ªÉu ƒë·ªì chu·ªói th·ªùi gian g·ªëc

**Ph√¢n t√≠ch**:
- Cho th·∫•y xu h∆∞·ªõng tƒÉng tr∆∞·ªüng m·∫°nh theo th·ªùi gian
- C√≥ t√≠nh m√πa v·ª• r√µ r·ªát (bi·∫øn ƒë·ªông l√™n xu·ªëng theo chu k·ª≥)
- D·ªØ li·ªáu kh√¥ng d·ª´ng (c·∫ßn sai ph√¢n)

### 2. `03_acf_pacf.png`

**M√¥ t·∫£**: Bi·ªÉu ƒë·ªì ACF v√† PACF c·ªßa chu·ªói sau khi sai ph√¢n b·∫≠c 2

**Ph√¢n t√≠ch**:
- **ACF**: 
  - Lag 1 c√≥ gi√° tr·ªã cao (‚âà -0.63)
  - C√≥ ƒë·ªânh t·∫°i lag 12 ‚Üí G·ª£i √Ω m·∫°nh v·ªÅ t√≠nh m√πa v·ª•
- **PACF**:
  - Lag 1 v√† 2 v∆∞·ª£t ng∆∞·ª°ng ‚Üí G·ª£i √Ω AR(2)
  - C≈©ng c√≥ ƒë·ªânh t·∫°i lag 12
- **K·∫øt lu·∫≠n**: C·∫ßn m√¥ h√¨nh c√≥ th√†nh ph·∫ßn m√πa v·ª• (SARIMA)

### 3. `04_residuals_(2, 2, 1).png` v√† `04_residuals_(1, 2, 1, 12).png`

**M√¥ t·∫£**: Bi·ªÉu ƒë·ªì ph·∫ßn d∆∞ c·ªßa ARIMA v√† SARIMA

**Ph√¢n t√≠ch**:
- **ARIMA**: Ph·∫ßn d∆∞ c√≥ v·∫ª c√≤n m·ªôt s·ªë pattern (kh√¥ng ho√†n to√†n ng·∫´u nhi√™n)
- **SARIMA**: Ph·∫ßn d∆∞ tr√¥ng ng·∫´u nhi√™n h∆°n, ph√¢n t√°n ƒë·ªÅu quanh 0
- **K·∫øt lu·∫≠n**: SARIMA c√≥ ph·∫ßn d∆∞ t·ªët h∆°n

### 4. `05_residuals_acf_(2, 2, 1).png` v√† `05_residuals_acf_(1, 2, 1, 12).png`

**M√¥ t·∫£**: ACF c·ªßa ph·∫ßn d∆∞

**Ph√¢n t√≠ch**:
- **L√Ω t∆∞·ªüng**: T·∫•t c·∫£ c√°c lag n·∫±m trong ng∆∞·ª°ng tin c·∫≠y (v√πng xanh)
- **ARIMA**: C√≥ th·ªÉ c√≤n m·ªôt s·ªë lag v∆∞·ª£t ng∆∞·ª°ng
- **SARIMA**: H·∫ßu h·∫øt lag n·∫±m trong ng∆∞·ª°ng ‚Üí Ph·∫ßn d∆∞ g·∫ßn v·ªõi nhi·ªÖu tr·∫Øng

### 5. `07_comparison_forecast.png`

**M√¥ t·∫£**: So s√°nh d·ª± b√°o gi·ªØa ARIMA v√† SARIMA v·ªõi d·ªØ li·ªáu th·ª±c t·∫ø

**Ph√¢n t√≠ch**:
- **ARIMA (ƒë∆∞·ªùng ƒë·ªè n√©t ƒë·ª©t)**: 
  - Ch·ªâ d·ª± b√°o ƒë∆∞·ª£c xu h∆∞·ªõng ph·∫≥ng
  - Kh√¥ng b·∫Øt ƒë∆∞·ª£c c√°c bi·∫øn ƒë·ªông m√πa v·ª•
  - Sai s·ªë l·ªõn t·∫°i c√°c ƒëi·ªÉm c√≥ bi·∫øn ƒë·ªông m·∫°nh
  
- **SARIMA (ƒë∆∞·ªùng xanh l√°)**:
  - T√°i hi·ªán ƒë∆∞·ª£c c√°c bi·∫øn ƒë·ªông h√¨nh rƒÉng c∆∞a
  - B·∫Øt ƒë∆∞·ª£c c·∫£ xu h∆∞·ªõng v√† t√≠nh m√πa v·ª•
  - S√°t v·ªõi d·ªØ li·ªáu th·ª±c t·∫ø (ƒë∆∞·ªùng cam) h∆°n nhi·ªÅu

- **K·∫øt lu·∫≠n**: SARIMA v∆∞·ª£t tr·ªôi ho√†n to√†n trong vi·ªác d·ª± b√°o d·ªØ li·ªáu c√≥ t√≠nh m√πa v·ª•

---

## H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng

### Ch·∫°y Pipeline

```bash
python ARIMA_model.py
```

### K·∫øt Qu·∫£ ƒê·∫ßu Ra

Sau khi ch·∫°y, b·∫°n s·∫Ω c√≥:

1. **C√°c file log** trong `logs/ARIMA_model/`:
   - `run_YYYYMMDD_HHMMSS.log`: Log t·ªïng quan
   - `adf.log`: K·∫øt qu·∫£ ki·ªÉm ƒë·ªãnh t√≠nh d·ª´ng
   - `suggested_lags.log`: G·ª£i √Ω b·∫≠c p, q
   - `information_criteria.log`: AIC/BIC
   - `evaluation.log`: MAE, RMSE, MAPE
   - `residuals.log`: Ch·∫©n ƒëo√°n ph·∫ßn d∆∞

2. **C√°c file b√°o c√°o** (`.txt`):
   - `stationarity_test_*.txt`: B√°o c√°o chi ti·∫øt v·ªÅ t√≠nh d·ª´ng
   - `ACF_PACF_Analysis_*.txt`: Ph√¢n t√≠ch ACF/PACF
   - `z_table_*.txt`: B·∫£ng tra c·ª©u Z-score

3. **C√°c bi·ªÉu ƒë·ªì** (`.png`):
   - `01_original_series.png`: Chu·ªói g·ªëc
   - `03_acf_pacf.png`: ACF/PACF
   - `04_residuals_*.png`: Ph·∫ßn d∆∞
   - `05_residuals_acf_*.png`: ACF c·ªßa ph·∫ßn d∆∞
   - `07_comparison_forecast.png`: So s√°nh d·ª± b√°o

### T√πy Ch·ªânh Tham S·ªë

B·∫°n c√≥ th·ªÉ ch·ªânh s·ª≠a c√°c tham s·ªë trong h√†m `main()`:

```python
# Thay ƒë·ªïi t·ª∑ l·ªá train/test
train, test = split(ts, ratio=0.8)  # M·∫∑c ƒë·ªãnh 80/20

# Thay ƒë·ªïi tham s·ªë ARIMA
arima_order = (2, d_final, 1)  # (p, d, q)

# Thay ƒë·ªïi tham s·ªë SARIMA
seasonal_order = (1, 1, 1, 12)  # (P, D, Q, s)
```

---

## K·∫øt Lu·∫≠n

### So S√°nh ARIMA vs SARIMA

| Ch·ªâ S·ªë | ARIMA(2,2,1) | SARIMA(1,2,1)x(1,1,1,12) | C·∫£i Thi·ªán |
|--------|--------------|--------------------------|-----------|
| **AIC** | 597.03 | 279.03 | ‚Üì 53% |
| **BIC** | 609.35 | 294.05 | ‚Üì 52% |
| **MAE** | 3.64 | 1.99 | ‚Üì 45% |
| **RMSE** | 4.30 | 2.47 | ‚Üì 43% |
| **MAPE** | 21.51% | 11.55% | ‚Üì 46% |
| **Residual Mean** | 0.086 | 0.010 | ‚Üì 88% |

### K·∫øt Lu·∫≠n Ch√≠nh

1. **SARIMA v∆∞·ª£t tr·ªôi ho√†n to√†n** trong vi·ªác d·ª± b√°o d·ªØ li·ªáu c√≥ t√≠nh m√πa v·ª•
2. **T√≠nh m√πa v·ª• l√† y·∫øu t·ªë quan tr·ªçng** - ARIMA kh√¥ng th·ªÉ b·∫Øt ƒë∆∞·ª£c pattern n√†y
3. **Ph·∫ßn d∆∞ c·ªßa SARIMA t·ªët h∆°n** - g·∫ßn v·ªõi nhi·ªÖu tr·∫Øng h∆°n
4. **M√¥ h√¨nh SARIMA ph√π h·ª£p h∆°n** cho d·ªØ li·ªáu doanh s·ªë b√°n l·∫ª h√†ng th√°ng

### Khuy·∫øn Ngh·ªã

- **S·ª≠ d·ª•ng SARIMA** cho d·ªØ li·ªáu c√≥ t√≠nh m√πa v·ª• r√µ r·ªát
- **Ki·ªÉm tra ph·∫ßn d∆∞** ƒë·ªÉ ƒë·∫£m b·∫£o m√¥ h√¨nh ph√π h·ª£p
- **So s√°nh AIC/BIC** gi·ªØa c√°c m√¥ h√¨nh ƒë·ªÉ l·ª±a ch·ªçn t·ªët nh·∫•t
- **ƒê√°nh gi√° tr√™n t·∫≠p test** ƒë·ªÉ ki·ªÉm tra kh·∫£ nƒÉng d·ª± b√°o th·ª±c t·∫ø
